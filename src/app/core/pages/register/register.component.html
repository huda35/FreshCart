<form [formGroup]="registerForm" (ngSubmit)="register()" class="max-w-md mx-auto m-20">
    @if(apiError)
{
<div class="flex p-4 mb-4 mt-2 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
    role="alert">
    {{apiError}}
</div>
}
    <div class="relative z-0 w-full mb-5 group">
        @let nameControl = registerForm.get("name");
        <input formControlName="name" type="text" name="floating_name" id="floating_name" class="input-style peer"
            placeholder=" " required />
        <label for="floating_name"
            class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">UserName</label>
        @if(nameControl?.errors && nameControl?.touched)
        {
        <div class="flex p-4 mb-4 mt-2 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
            role="alert">
            <ul class="mt-1.5 list-disc list-inside">
                @if(nameControl?.getError('required')){
                    <li>Name is required</li>
                }
                @else if(nameControl?.getError('minlength')){
                    <li>Min characters is 3</li>
                }
                @else if(nameControl?.getError('maxlength')){
                    <li>Max characters is 20</li>
                }
            </ul>
        </div>
        }
    </div>
    <div class="relative z-0 w-full mb-5 group">
        @let emailControl = registerForm.get("email");
        <input formControlName="email" type="email" name="floating_email" id="floating_name" class="input-style peer"
            placeholder=" " required />
        <label for="floating_name"
            class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">User
            Email</label>
            @if(emailControl?.errors && emailControl?.touched)
            {
            <div class="flex p-4 mb-4 mt-2 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
                role="alert">
                <ul class="mt-1.5 list-disc list-inside">
                    @if(emailControl?.getError('required')){
                        <li>Email is required</li>
                    }
                    @else if(emailControl?.getError('email')){
                        <li>Invalid Email</li>
                    }
                </ul>
            </div>
            }
    </div>
    <div class="relative z-0 w-full mb-5 group">
        @let passwordControl = registerForm.get("password");
        <input formControlName="password" type="password" name="floating_password" id="floating_password"
            class="input-style peer" placeholder=" " required />
        <label for="floating_password"
            class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">User
            Password</label>
            @if(passwordControl?.errors && passwordControl?.touched)
            {
            <div class="flex p-4 mb-4 mt-2 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
                role="alert">
                <ul class="mt-1.5 list-disc list-inside">
                    @if(passwordControl?.getError('required')){
                        <li>Password is required</li>
                    }
                    @else if(passwordControl?.getError('pattern')){
                        <li>Invalid Pattern</li>
                    }
                </ul>
            </div>
            }
    </div>
    <div class="relative z-0 w-full mb-5 group">
        @let rePasswordControl = registerForm.get("rePassword");
        <input formControlName="rePassword" type="password" name="floating_rePassword" id="floating_rePassword"
            class="input-style peer" placeholder=" " required />
        <label for="floating_rePassword"
            class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">RePassword</label>
            @if( rePasswordControl?.touched && ( rePasswordControl?.errors || registerForm?.getError('misMatch')))
            {
            <div class="flex p-4 mb-4 mt-2 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
                role="alert">
                <ul class="mt-1.5 list-disc list-inside">
                    @if(rePasswordControl?.getError('required')){
                        <li>rePassword is required</li>
                    }
                    @else if(rePasswordControl?.getError('pattern')){
                        <li>Invalid Pattern</li>
                    }
                    @else if(registerForm?.getError('misMatch')){
                        <li>Password and rePassword should match</li>
                    }
                </ul>
            </div>
            }
        </div>
    <div class="relative z-0 w-full mb-5 group">
        @let phoneControl = registerForm.get("phone");
        <input formControlName="phone" type="tel" name="floating_phone" id="floating_phone" class="input-style peer"
            placeholder=" " required />
        <label for="floating_phone"
            class="label-style peer-focus:font-medium peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-main peer-focus:dark:text-main peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">User
            Phone</label>
            @if(phoneControl?.errors && phoneControl?.touched)
            {
            <div class="flex p-4 mb-4 mt-2 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"
                role="alert">
                <ul class="mt-1.5 list-disc list-inside">
                    @if(phoneControl?.getError('required')){
                        <li>Phone is required</li>
                    }
                    @else if(phoneControl?.getError('pattern')){
                        <li>Invalid Pattern</li>
                    }
                </ul>
            </div>
            }
    </div>
    
    <button type="submit" [disabled]="isCallingApi" class="main-btn">
        @if (isCallingApi){
            <i class="fa fa-spin fa-spinner"></i>
        }
        @else{
            Submit
        }
        
    </button>
</form>